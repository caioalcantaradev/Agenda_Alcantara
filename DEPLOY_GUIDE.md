# üöÄ Guia de Deployment - Fam√≠lia Alcantara

## üìã Vis√£o Geral

Este projeto precisa de **2 deploys separados**:

1. **Frontend** ‚Üí Vercel (Next.js)
2. **Backend** ‚Üí Render / Railway / Heroku (Node.js + Express)

---

## 1Ô∏è‚É£ Deploy do Frontend (Vercel)

### Passo 1: Preparar Frontend
```bash
cd frontend
npm run build
```
Se o build passou, est√° pronto!

### Passo 2: Conectar com Vercel

**Op√ß√£o A - Via GitHub (Recomendado):**
1. Acesse: https://vercel.com
2. Login com GitHub
3. Clique em "Add New Project"
4. Selecione: `caioalcantaradev/Agenda_Alcantara`
5. Configure:
   - **Framework Preset**: Next.js
   - **Root Directory**: `frontend`
   - **Install Command**: `npm install`
   - **Build Command**: `npm run build`
   - **Output Directory**: `.next`

**Op√ß√£o B - Via CLI:**
```bash
cd frontend
npm i -g vercel
vercel login
vercel
```

### Passo 3: Configurar Vari√°veis de Ambiente

No painel da Vercel, v√° em **Settings ‚Üí Environment Variables** e adicione:

```env
NEXT_PUBLIC_API_URL=https://seu-backend.onrender.com
NEXT_PUBLIC_GOOGLE_CLIENT_ID=348669216349-vusinhi22q9epgjqmdt6f59d4c07d5lu.apps.googleusercontent.com
```

‚ö†Ô∏è **IMPORTANTE**: Substitua `https://seu-backend.onrender.com` pela URL real do backend ap√≥s deploy

### Passo 4: Deploy
Clique em "Deploy" e aguarde!

üîó **URL**: Sua aplica√ß√£o estar√° em: `https://agenda-alcantara.vercel.app`

---

## 2Ô∏è‚É£ Deploy do Backend (Render / Railway)

### ‚öôÔ∏è Op√ß√£o A: Render (GRATUITO)

#### 1. Criar Conta
- Acesse: https://render.com
- Login com GitHub

#### 2. Criar Web Service
- Clique: "New" ‚Üí "Web Service"
- Conecte ao reposit√≥rio: `caioalcantaradev/Agenda_Alcantara`
- Configure:
  - **Name**: `agenda-alcantara-backend`
  - **Runtime**: Node
  - **Branch**: `main`
  - **Root Directory**: `backend`
  - **Build Command**: `npm install && npm run build`
  - **Start Command**: `npm start`

#### 3. Vari√°veis de Ambiente
Adicione as seguintes vari√°veis:

```env
GOOGLE_CLIENT_ID=348669216349-vusinhi22q9epgjqmdt6f59d4c07d5lu.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=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
GOOGLE_REDIRECT_URI=https://agenda-alcantara-backend.onrender.com/api/auth/google/callback
SHARED_CALENDAR_ID=76272a2b0f3224f3835adb0c9cc2bfce8a2d023f9c705e98845a474981a2efe3@group.calendar.google.com
MONGODB_URI=mongodb+srv://caioalcantaradev_db_user:K9cAfEtux3kTWCen@agendaalcantara.btom26f.mongodb.net/agenda_alcantara?retryWrites=true&w=majority
JWT_SECRET=uma_senha_secreta_segura_aqui
PORT=10000
FRONTEND_URL=https://agenda-alcantara.vercel.app
```

‚ö†Ô∏è **IMPORTANTE**: `FRONTEND_URL` deve ser a URL do seu frontend no Vercel

#### 4. Deploy
- Clique em "Create Web Service"
- Aguarde o deploy (pode levar 10-15 minutos)

üîó **URL**: `https://agenda-alcantara-backend.onrender.com`

---

### ‚öôÔ∏è Op√ß√£o B: Railway (GRATUITO)

#### 1. Criar Conta
- Acesse: https://railway.app
- Login com GitHub

#### 2. Criar Projeto
- Clique: "New Project"
- Selecione: "Deploy from GitHub repo"
- Escolha: `caioalcantaradev/Agenda_Alcantara`

#### 3. Configurar Servi√ßo
- Railway detecta automaticamente o `backend/`
- Configure as vari√°veis de ambiente (mesmas do Render)

#### 4. Deploy
- Clique em "Deploy"
- Aguarde alguns minutos

üîó **URL**: Ter√° uma URL autom√°tica tipo: `https://agenda-alcantara-production.up.railway.app`

---

## 3Ô∏è‚É£ Atualizar Google OAuth

‚ö†Ô∏è **CR√çTICO**: Ap√≥s fazer deploy do backend, voc√™ PRECISA atualizar o OAuth!

### 1. Google Cloud Console
1. Acesse: https://console.cloud.google.com/
2. V√° em: APIs & Services ‚Üí Credentials
3. Edite seu OAuth Client
4. Em "Authorized redirect URIs", ADICIONE:
   ```
   https://seu-backend.onrender.com/api/auth/google/callback
   ```
   (ou a URL do seu backend no Railway)

### 2. Salvar e Aguardar
- Clique em "Save"
- Aguarde 5-10 minutos para propagar

---

## 4Ô∏è‚É£ Atualizar Frontend com URL do Backend

### No Vercel:
1. V√° em Settings ‚Üí Environment Variables
2. Edite `NEXT_PUBLIC_API_URL`
3. Coloque a URL real do seu backend
4. Fa√ßa Redeploy

### Ou edite localmente e fa√ßa commit:
```bash
# Em frontend/.env.local
NEXT_PUBLIC_API_URL=https://seu-backend.onrender.com
git commit -am "feat: atualizar URL do backend para produ√ß√£o"
git push
```

---

## 5Ô∏è‚É£ Testar Produ√ß√£o

1. **Frontend**: Acesse sua URL Vercel
2. **Login**: Teste login com Google
3. **Calend√°rio**: Verifique se os eventos carregam
4. **Criar Evento**: Teste criar um evento

---

## üêõ Troubleshooting

### Erro: "redirect_uri_mismatch"
- Verifique se a URL do redirect est√° correta no Google Console
- Aguarde 10 minutos ap√≥s mudan√ßa

### Erro: CORS
- Verifique se `FRONTEND_URL` no backend est√° correto
- Deve ser a URL completa do Vercel

### Backend n√£o inicia
- Verifique logs no Render/Railway
- Confirme que `PORT` est√° configurado (10000 para Render)

### Frontend n√£o conecta ao backend
- Verifique `NEXT_PUBLIC_API_URL` no Vercel
- Confirme que o backend est√° online

---

## üìä Check-list de Deployment

### Backend
- [ ] Build passa localmente (`npm run build`)
- [ ] Deploy no Render/Railway
- [ ] Vari√°veis de ambiente configuradas
- [ ] Backend est√° online (health check)
- [ ] Redirect URI atualizado no Google Console

### Frontend
- [ ] Build passa localmente (`npm run build`)
- [ ] Deploy no Vercel
- [ ] Vari√°veis de ambiente configuradas
- [ ] URL do backend atualizada

### Testes
- [ ] Login funciona
- [ ] Calend√°rio carrega
- [ ] Eventos aparecem
- [ ] Criar evento funciona
- [ ] Editar evento funciona

---

## üéâ URLs Finais

- **Frontend**: `https://agenda-alcantara.vercel.app`
- **Backend**: `https://agenda-alcantara-backend.onrender.com`
- **Reposit√≥rio**: https://github.com/caioalcantaradev/Agenda_Alcantara

---

## üí° Dicas

- **Render**: Free tier permite 750h/m√™s (mais que suficiente)
- **Vercel**: Ilimitado no free tier
- **Updates**: A cada push no GitHub, faz deploy autom√°tico!
- **Dom√≠nio**: Voc√™ pode adicionar dom√≠nio customizado depois

---

## üìû Precisa de Ajuda?

- Verifique logs no Vercel (Deployments ‚Üí Build/Function Logs)
- Verifique logs no Render (Logs)
- Console do navegador (F12 ‚Üí Console)

